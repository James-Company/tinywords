# 03 USER FLOWS

이 문서는 TinyWords MVP의 핵심 사용자 흐름을 정의한다.  
모든 플로우는 "하루 3-5개 단어를 회상 중심으로 학습하고 복습 루틴을 유지한다"는 제품 목표를 기준으로 설계한다.

---

## 1) 플로우 설계 원칙

- **짧은 시작 시간:** 앱 실행 후 1-2분 내 학습 시작 가능해야 한다.
- **루틴 완결성:** Today 학습 -> 복습 큐 생성 -> Inbox 복습으로 이어져야 한다.
- **오프라인 연속성:** 네트워크 없어도 핵심 흐름이 끊기지 않아야 한다.
- **낮은 인지부하:** 한 화면에서 "지금 해야 할 것"이 명확해야 한다.

---

## 2) 사용자 상태 정의

- **New User:** 첫 설치 후 학습 이력이 없는 사용자
- **Active User:** 최근 7일 내 학습 또는 복습 수행 사용자
- **Returning User:** 7일 이상 공백 후 다시 진입한 사용자

플로우는 상태에 따라 진입점과 안내 문구만 달라지고, 핵심 학습 루프는 동일하게 유지한다.

---

## 3) 핵심 플로우 A: 첫 진입(온보딩 -> 첫 학습)

### 트리거

- 사용자가 앱을 처음 실행한다.

### 사용자 행동

1. 간단 온보딩에서 TinyWords 방식(하루 3-5개, 회상 중심)을 확인한다.
2. 일일 학습량(기본 3개, 필요 시 4/5개)을 선택한다.
3. Today 화면에서 "시작"을 탭한다.
4. 첫 단어 학습(의미 확인 -> 회상 -> 예문 -> 발화)을 진행한다.

### 시스템 반응

- 기본 설정값(일일 학습량, 초기 학습 선호)을 저장한다.
- 첫 학습 대상 단어 세트를 생성/표시한다.
- 단계 진행률을 실시간으로 업데이트한다.
- 학습 완료 시 복습 큐를 자동 생성한다.

### 완료 조건

- 사용자가 오늘 할당된 단어 학습을 모두 완료하고, 최소 1개 이상의 복습 예정 항목이 생성된다.

---

## 4) 핵심 플로우 B: 일일 학습(Today)

### 트리거

- 사용자가 앱을 열거나 Today 탭으로 진입한다.

### 사용자 행동

1. 오늘 학습 목표(예: 3개 중 0개 완료)를 확인한다.
2. 단어 카드 학습을 순차 진행한다.
3. 각 단어에서 회상 질문에 응답한다.
4. 예문을 확인하고, 짧은 발화 녹음을 시도한다.
5. 모든 단어 완료 후 요약 상태를 확인한다.

### 시스템 반응

- 단어별 상태를 `미시작 -> 진행중 -> 완료`로 업데이트한다.
- 회상/발화 수행 여부를 학습 로그에 저장한다.
- 완료 단어를 복습 정책에 맞춰 Inbox 큐에 등록한다.
- 스트릭 계산 대상 이벤트를 기록한다.

### 완료 조건

- 당일 목표 단어 수를 모두 완료하고 Today 진행률이 100%가 된다.

---

## 5) 핵심 플로우 C: 복습 수행(Inbox)

### 트리거

- 복습 예정 시간이 도래했거나, 사용자가 Inbox 탭으로 이동한다.

### 사용자 행동

1. 복습 대기 항목 수를 확인한다.
2. 항목별 회상(뜻 -> 단어, 단어 -> 뜻)을 수행한다.
3. 필요 시 예문/발화를 다시 확인한다.
4. 복습 결과를 완료 처리한다.

### 시스템 반응

- 복습 결과에 따라 다음 복습 시점을 갱신한다.
- 완료 항목을 Inbox 목록에서 제외하고 History에 기록한다.
- 당일 완료 조건 충족 시 스트릭을 반영한다.

### 완료 조건

- 당일 복습 대상이 모두 처리되며, 다음 복습 일정이 저장된다.

---

## 6) 핵심 플로우 D: 기록 확인(History)

### 트리거

- 사용자가 History 탭으로 이동한다.

### 사용자 행동

1. 날짜별 학습/복습 완료 내역을 확인한다.
2. 단어별 상세 기록(회상/발화 수행 여부)을 확인한다.
3. 누락된 날이 있으면 Today 또는 Inbox로 이동한다.

### 시스템 반응

- 최근 활동 순으로 기록을 표시한다.
- 필터(학습/복습/전체)에 따라 목록을 재구성한다.
- 선택 항목의 상세 학습 로그를 조회한다.

### 완료 조건

- 사용자가 자신의 학습 연속성과 누락 지점을 명확히 파악할 수 있다.

---

## 7) 핵심 플로우 E: 설정 변경(Settings)

### 트리거

- 사용자가 Settings 탭으로 이동한다.

### 사용자 행동

1. 일일 학습량을 3-5개 범위에서 조정한다.
2. 학습/복습 기본 옵션(알림, 발화 선호 등)을 수정한다.
3. 변경사항을 저장하고 Today로 돌아간다.

### 시스템 반응

- 변경값을 로컬 저장소에 즉시 저장한다.
- 다음 학습 사이클부터 변경된 정책을 반영한다.
- 정책 충돌 시 우선순위 규칙에 따라 안전한 기본값을 적용한다.

### 완료 조건

- 변경값이 재실행 후에도 유지되고, 이후 학습 흐름에 정상 반영된다.

---

## 8) 예외 플로우

### 8.1 네트워크 오류 / AI 생성 실패

- **상황:** 단어/문장 생성 호출 실패
- **사용자 경험:** 실패 메시지 + 재시도 버튼 + 기존 저장 데이터로 학습 계속
- **시스템 처리:** 실패 로그 기록, 백오프 재시도, 로컬 데이터 우선 표시

### 8.2 오디오 권한 거부

- **상황:** 마이크 권한이 없음
- **사용자 경험:** 권한 안내와 설정 이동 버튼 제공, 텍스트 학습은 계속 가능
- **시스템 처리:** 발화 단계는 선택 상태로 유지하고 플로우 중단 없이 다음 단계 진행

### 8.3 앱 중단 후 재진입

- **상황:** 학습 중 앱 종료/크래시
- **사용자 경험:** 마지막 진행 지점에서 이어하기 제공
- **시스템 처리:** 체크포인트 기반으로 진행 상태 복원

---

## 9) 화면 간 전이 규칙

- 기본 하단 탭: `Today | Inbox | History | Settings`
- 추천 전이:
  - Today 완료 후 -> Inbox(복습 항목이 있으면 우선 이동 유도)
  - Inbox 완료 후 -> History(오늘 기록 확인 유도)
  - History에서 미완료 발견 시 -> Today 또는 Inbox로 이동
- 전이는 사용자 강제보다 제안형 CTA를 우선한다.

---

## 10) 이벤트 로깅(분석용 최소 스키마)

- `app_opened`
- `today_started`
- `word_step_completed` (회상/예문/발화 단계 구분 포함)
- `today_completed`
- `review_started`
- `review_completed`
- `streak_updated`
- `settings_updated`
- `flow_error_occurred` (네트워크/권한/오디오/기타 구분)

MVP에서는 이벤트의 정밀 분석보다 "핵심 루프 완료율 추적 가능성"을 우선한다.

---

## 11) 플로우 수용 기준

1. New User는 첫 실행 후 5분 내 첫 학습 완료가 가능해야 한다.
2. Active User는 앱 실행 후 2탭 이내 Today 또는 Inbox 학습 시작이 가능해야 한다.
3. Returning User는 공백 이후 재진입 시 마지막 상태를 이해하고 즉시 재시작 가능해야 한다.
4. 예외 상황(네트워크, 권한, 앱 중단)에서도 학습 루프가 완전히 끊기지 않아야 한다.

---

## 12) 관련 문서

- 제품 비전: `01_PRODUCT_VISION.md`
- MVP 범위: `02_MVP_SCOPE.md`
- 데이터 모델: `04_DATA_MODEL.md`
- Today 화면: `05_SCREEN_SPEC_TODAY.md`
- Inbox 화면: `06_SCREEN_SPEC_INBOX.md`
- History 화면: `07_SCREEN_SPEC_HISTORY.md`
- Settings 화면: `08_SCREEN_SPEC_SETTINGS.md`
- 복습 정책: `11_SPACED_REVIEW_POLICY.md`
- 스트릭 규칙: `12_STREAK_RULES.md`
- UI 스타일: `17_UI_STYLE_NOTEBOOK_THEME.md`
