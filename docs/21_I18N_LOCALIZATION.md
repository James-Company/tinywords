# 21 I18N LOCALIZATION

이 문서는 TinyWords의 국제화(i18n)/현지화(l10n) 정책 SSOT이다.  
목표는 다국어 확장 시 기능 품질을 유지하면서, 문자열/날짜/숫자/카피 톤을 언어별로 일관되게 제공하는 것이다.

---

## 1) 목적

- UI 텍스트를 코드와 분리해 언어 추가 비용을 줄인다.
- 날짜/시간/숫자 표현을 로케일 기준으로 정확히 표시한다.
- 학습 도메인 용어(복습, 스트릭, 회상)의 의미를 언어별로 일관되게 전달한다.

---

## 2) 지원 로케일 정책

- MVP 기본 로케일: `ko-KR`
- 확장 우선 로케일: `en-US`, `ja-JP` (필요 시)
- 로케일 식별은 BCP-47 태그 사용 (`ll-CC`)

fallback 규칙:
1. 사용자 선택 로케일
2. OS 로케일
3. 기본 로케일(`ko-KR`)

---

## 3) 번역 리소스 구조

권장 경로:
- `src/i18n/locales/ko-KR.json`
- `src/i18n/locales/en-US.json`

네임스페이스:
- `common.*`
- `today.*`
- `inbox.*`
- `history.*`
- `settings.*`
- `errors.*`
- `coach.*`

키 네이밍 규칙:
- `snake_case` 또는 `dot.case` 중 하나로 고정(프로젝트 전체 일관성 유지)
- 권장: `screen.section.intent` (`today.cta.start`)

금지:
- 화면 텍스트 하드코딩
- 같은 의미의 중복 키 생성

---

## 4) 메시지 작성 규칙

- 짧고 행동 중심 문장 사용
- 비난/압박 표현 금지(브랜드 톤 준수)
- 변수 포함 문구는 ICU 메시지 포맷 사용 권장

예:
- `"today.progress": "{done}/{target} 완료"`
- `"history.gap_days": "{count}일 공백"`

---

## 5) 복수형/수량 처리

- 영어 등 복수형이 있는 언어는 ICU plural 룰 사용
- 한국어는 수량 변화에 따른 형태 변화가 적어도 키 통일 유지

예:
- `reviews.remaining`
  - `ko-KR`: `남은 복습 {count}개`
  - `en-US`: `{count, plural, one {# review left} other {# reviews left}}`

---

## 6) 날짜/시간/숫자 로컬라이징

- 저장: UTC datetime (`created_at`, `updated_at` 등)
- 표시: 로케일 + 사용자 타임존 기준 포맷
- 날짜형(`plan_date`, `due_date`)은 로컬 날짜로 처리

표시 원칙:
- 상대 시간(`오늘`, `내일`)은 로케일별 번역 키로 관리
- 숫자/퍼센트는 Intl formatter 사용

---

## 7) 도메인 용어집(번역 고정어)

- Day Plan: `오늘 계획`
- Review Queue: `복습 큐`
- Streak: `연속 학습`
- Recall: `회상`
- Overdue: `밀린 복습`

원칙:
- 동일 용어를 화면마다 다르게 번역하지 않는다.
- 용어 변경 시 `SSOT` 및 전체 번역 리소스를 동시 갱신한다.

---

## 8) AI/오류 메시지 현지화

- AI 원문 응답은 서버/클라이언트에서 사용자 로케일에 맞춰 후처리
- 오류 메시지는 에러 코드 기반으로 로컬라이즈
- 민감/기술 상세는 사용자 메시지와 분리(로그 전용)

권장:
- `errors.VALIDATION_ERROR`
- `errors.AI_UPSTREAM_ERROR`

---

## 9) 접근성/문장 길이 제약

- 버튼 라벨은 가능한 12자 내외(언어별 예외 허용)
- 줄바꿈 의존 문구 금지(언어별 길이 차이 대응)
- 스크린리더 레이블도 번역 리소스로 관리

---

## 10) 개발 규칙

- 신규 UI 문자열 추가 시:
  1. 기본 로케일 키 추가
  2. 다른 지원 로케일에 placeholder라도 추가
  3. 미번역 키 검출 테스트 통과

- PR 체크:
  - 하드코딩 문자열 없음
  - dead key(미사용 키) 증가 여부 확인

---

## 11) 테스트 기준(요약)

필수 테스트:
1. 로케일 전환 시 화면 재렌더링 정상
2. fallback 체인 동작 검증
3. ICU 변수/복수형 포맷 검증
4. 긴 번역 문자열에서 레이아웃 깨짐 없음
5. 미번역 키 감지(키 노출 방지)

상세 케이스는 `19_TEST_PLAN.md`에서 관리한다.

---

## 12) 릴리즈 체크

- 스토어 설명/스크린샷/정책 문구의 언어 일치성 확인
- 새 로케일 추가 시 번역 커버리지 기준(예: 95%+) 충족
- 릴리즈 노트의 사용자 대상 문구도 로케일별 준비

---

## 13) 수용 기준(DoD)

1. 지원 로케일에서 핵심 4개 화면 텍스트가 하드코딩 없이 동작한다.
2. 날짜/시간/숫자 표기가 로케일 규칙에 맞는다.
3. 미번역 키가 사용자 화면에 노출되지 않는다.
4. 용어집 기준으로 핵심 도메인 용어가 일관된다.
5. i18n 변경이 테스트/릴리즈 체크리스트에 반영된다.

---

## 14) 관련 문서

- UI 스타일: `17_UI_STYLE_NOTEBOOK_THEME.md`
- API 계약: `15_API_CONTRACT.md`
- 테스트 계획: `19_TEST_PLAN.md`
- 릴리즈 체크리스트: `20_RELEASE_CHECKLIST.md`
- SSOT: `SSOT.md`
